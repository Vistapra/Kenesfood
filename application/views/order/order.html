<!-- Session Management Sections -->
<div class="container py-4" id="session-page">
    <!-- Location Verification -->
    <div id="location-verification" class="location-alert">
        <div class="d-flex align-items-center">
            <i class="bi bi-geo-alt location-icon"></i>
            <div>
                <h5 class="mb-1">Verifikasi Lokasi</h5>
                <p class="mb-0" id="location-status">Mohon izinkan akses lokasi</p>
                <div class="progress mt-2" style="height: 3px;" id="location-progress" hidden>
                    <div class="progress-bar progress-bar-striped progress-bar-animated"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Outlet Information -->
    <div class="modern-card" id="outlet-info-section">
        <div class="card-header bg-light d-flex justify-content-between align-items-center">
            <h5 class="mb-0">Informasi Outlet</h5>
            <span class="status-badge" id="outlet-status">Buka</span>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <p class="mb-2 fs-5 fw-bold" id="outlet-name">{$outlet.outlet_name}</p>
                    <p class="text-muted" id="outlet-address">{$outlet.outlet_address}</p>
                </div>
                <div class="col-md-6">
                    <div class="operating-hours">
                        <div class="d-flex justify-content-between mb-2">
                            <span>Jam Buka:</span>
                            <span class="fw-bold" id="outlet-open">{$outlet.hour_open}</span>
                        </div>
                        <div class="d-flex justify-content-between">
                            <span>Jam Tutup:</span>
                            <span class="fw-bold" id="outlet-close">{$outlet.hour_close}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Session Creation Form -->
    <div class="modern-card" id="session-creation" {if $session}hidden{/if}>
        <div class="card-header bg-light">
            <h5 class="mb-0">Mulai Pesanan</h5>
        </div>
        <div class="card-body">
            <form id="session-form" class="needs-validation" novalidate>
                <div class="mb-3">
                    <label class="form-label">Nama Pelanggan</label>
                    <input type="text" class="form-control" id="customer-name" minlength="3" required>
                    <div class="invalid-feedback">Nama minimal 3 karakter</div>
                </div>
                <div class="mb-3">
                    <label class="form-label">Passcode</label>
                    <input type="password" class="form-control" id="passcode" minlength="4" required>
                    <div class="invalid-feedback">Passcode minimal 4 karakter</div>
                </div>
                <button type="submit" class="btn btn-primary w-100">
                    <i class="bi bi-clock me-2"></i>Mulai Pesanan
                </button>
            </form>
        </div>
    </div>

    <!-- Resume Session -->
    <div class="modern-card" id="resume-session" {if !$session}hidden{/if}>
        <div class="card-header bg-light">
            <h5 class="mb-0">Lanjutkan Sesi</h5>
        </div>
        <div class="card-body">
            <div class="alert alert-info mb-3">
                <i class="bi bi-info-circle me-2"></i>
                Meja ini memiliki sesi yang masih aktif
            </div>
            <form id="resume-form">
                <div class="mb-3">
                    <label class="form-label">Masukkan Passcode</label>
                    <input type="password" class="form-control" id="resume-passcode" required>
                </div>
                <button type="submit" class="btn btn-primary w-100">
                    <i class="bi bi-arrow-clockwise me-2"></i>Lanjutkan Sesi
                </button>
            </form>
        </div>
    </div>
</div>

    <!-- Active Session Display -->
    <div class="modern-card" id="active-session" {if !$session || $session.status != 'RESERVED'}hidden{/if}>
        <div class="timer-display">
            <div class="row align-items-center">
                <div class="col">
                    <span class="fs-4" id="session-timer">00:00</span>
                </div>
            </div>
        </div>
        <div class="p-4">
            <div class="row mb-4">
                <div class="col-md-6">
                    <p class="mb-1">Pelanggan: <strong id="active-customer">{$session.name}</strong></p>
                    <p class="mb-0">Meja: <strong id="active-table">{$table_id}</strong></p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-1">Status: <span class="badge bg-info" id="session-status">{$session.status}</span></p>
                    <p class="mb-0">Mulai: <span id="session-start">{$session.created_at}</span></p>
                </div>
            </div>

            <!-- Cart Summary -->
            {if isset($cart_items) && count($cart_items) > 0}
            <div class="cart-summary mb-4">
                <h6 class="mb-3">Ringkasan Pesanan</h6>
                <div class="table-responsive">
                    <table class="table table-sm">
                        <thead>
                            <tr>
                                <th>Item</th>
                                <th class="text-center">Qty</th>
                                <th class="text-end">Subtotal</th>
                            </tr>
                        </thead>
                        <tbody>
                            {foreach from=$cart_items item=item}
                            <tr>
                                <td>{$item.product_name}</td>
                                <td class="text-center">{$item.quantity}x</td>
                                <td class="text-end">Rp {$item.subtotal|number_format:0:',':'.'}</td>
                            </tr>
                            {if !empty($item.notes)}
                            <tr>
                                <td colspan="3" class="text-muted small">
                                    <i class="bi bi-pencil-square me-1"></i>{$item.notes}
                                </td>
                            </tr>
                            {/if}
                            {/foreach}
                        </tbody>
                        <tfoot>
                            <tr>
                                <th>Total</th>
                                <th class="text-center">{$total_items} items</th>
                                <th class="text-end">Rp {$total_amount|number_format:0:',':'.'}</th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
            {/if}

            <div id="session-warning" class="alert alert-warning mb-0 d-flex align-items-center" hidden>
                <i class="bi bi-exclamation-triangle me-2"></i>
                <div>
                    Sesi akan berakhir dalam <strong id="warning-time"></strong> menit
                </div>
            </div>
        </div>
    </div>


  <section
	class="explore-section section-padding custom-hidden"
	id="order-page"
	hidden
  >
	<!-- Detail Products -->
	<div
	  class="modal fade"
	  id="detail-product"
	  tabindex="-1"
	  aria-labelledby="detail-product-label"
	  aria-hidden="true"
	>
	  <div class="modal-dialog modal-sm modal-dialog-centered">
		<div class="modal-content">
		  <div class="modal-header">
			<h1 class="modal-title fs-5" id="detail-product-label"></h1>
			<button
			  type="button"
			  class="btn-close"
			  data-bs-dismiss="modal"
			  aria-label="Close"
			></button>
		  </div>
		  <div class="modal-body">
			<div class="container">
			  <div id="product-id" hidden></div>
			  <div class="row">
				<div class="col-12">
				  <img
					id="detail-product-image"
					src=""
					class="rounded mx-auto d-block"
					alt=""
				  />
				</div>
			  </div>
			  <div class="row">
				<div class="col-12">
				  <p id="detail-product-description" class="card-text"></p>
				</div>
			  </div>
			</div>
		  </div>
		  <div class="modal-footer">
			<button
			  type="button"
			  class="btn btn-secondary"
			  data-bs-dismiss="modal"
			>
			  Close
			</button>
			<button type="button" class="btn btn-info" id="add-to-cart">
			  Add To Cart
			</button>
		  </div>
		</div>
	  </div>
	</div>
	<!-- End of Detail Product -->
  
	<!-- Cart -->
	<!-- Cart Modal -->
	<div
	  class="modal fade"
	  id="cart-modal"
	  tabindex="-1"
	  aria-labelledby="cart-label"
	  aria-hidden="true"
	>
	  <div class="modal-dialog modal-lg modal-dialog-centered">
		<div class="modal-content">
		  <div class="modal-header">
			<h1 class="modal-title fs-5" id="cart-label">Shopping Cart</h1>
			<button
			  type="button"
			  class="btn-close"
			  data-bs-dismiss="modal"
			  aria-label="Close"
			></button>
		  </div>
		  <div class="modal-body">
			<div class="container text-center" id="container-cart">
			  <!-- Cart Items Group -->
			  <div id="cart-items-container">
				<!-- Regular Items Template -->
				<div id="regular-item-template" hidden>
				  <div class="cart-item mb-3">
					<div class="row align-items-center">
					  <div class="col-3">
						<img src="" class="img-fluid cart-item-image" />
					  </div>
					  <div class="col-3">
						<p class="cart-item-name mb-0"></p>
						<small class="text-muted cart-item-price"></small>
					  </div>
					  <div class="col-6">
						<div
						  class="d-flex align-items-center justify-content-end"
						>
						  <button
							class="btn btn-sm btn-primary action-minus me-2"
						  >
							<i class="fa-solid fa-minus"></i>
						  </button>
						  <input
							type="number"
							class="form-control action-number"
							style="width: 60px"
							min="0"
						  />
						  <button class="btn btn-sm btn-primary action-plus ms-2">
							<i class="fa-solid fa-plus"></i>
						  </button>
						</div>
					  </div>
					</div>
					<div class="row mt-2">
					  <div class="col-12 text-start">
						<small class="text-muted"
						  >Stock: <span class="cart-item-stock"></span
						></small>
					  </div>
					</div>
					<div class="row mt-2">
					  <div class="col-12">
						<textarea
						  class="form-control notes"
						  rows="2"
						  placeholder="Add Note"
						></textarea>
					  </div>
					</div>
				  </div>
				</div>
  
				<!-- Package Items Template -->
				<div id="package-item-template" hidden>
				  <div class="cart-package mb-4">
					<div class="package-header bg-light p-2 rounded mb-2">
					  <div class="row align-items-center">
						<div class="col-3">
						  <img src="" class="img-fluid package-image" />
						</div>
						<div class="col-5">
						  <h6 class="package-name mb-0"></h6>
						  <small class="text-muted package-price"></small>
						</div>
						<div class="col-4">
						  <div
							class="d-flex align-items-center justify-content-end"
						  >
							<button
							  class="btn btn-sm btn-primary action-minus me-2"
							>
							  <i class="fa-solid fa-minus"></i>
							</button>
							<input
							  type="number"
							  class="form-control action-number"
							  style="width: 60px"
							  min="0"
							/>
							<button
							  class="btn btn-sm btn-primary action-plus ms-2"
							>
							  <i class="fa-solid fa-plus"></i>
							</button>
						  </div>
						</div>
					  </div>
					  <div class="row mt-2">
						<div class="col-12">
						  <textarea
							class="form-control notes"
							rows="2"
							placeholder="Add Note"
						  ></textarea>
						</div>
					  </div>
					</div>
					<div class="package-items ms-4">
					  <!-- Package items will be inserted here -->
					</div>
				  </div>
				</div>
  
				<!-- Package Child Item Template -->
				<div id="package-child-template" hidden>
				  <div class="package-child-item mb-2">
					<div class="row align-items-center">
					  <div class="col-3">
						<img src="" class="img-fluid child-item-image" />
					  </div>
					  <div class="col-5">
						<p class="child-item-name mb-0"></p>
						<small class="text-muted"
						  >Category: <span class="child-item-category"></span
						></small>
					  </div>
					  <div class="col-4 text-end">
						<span class="child-item-quantity"></span> items
					  </div>
					</div>
					<div class="row mt-2">
					  <div class="col-12">
						<textarea
						  class="form-control child-notes"
						  rows="2"
						  placeholder="Add Note for this item"
						></textarea>
					  </div>
					</div>
				  </div>
				</div>
			  </div>
  
			  <!-- Cart Summary -->
			  <div class="cart-summary mt-4">
				<div class="row">
				  <div class="col-12">
					<hr />
					<div class="d-flex justify-content-between">
					  <h6>Total Items:</h6>
					  <h6 id="cart-total-items">0</h6>
					</div>
					<div class="d-flex justify-content-between">
					  <h6>Total Amount:</h6>
					  <h6 id="cart-total-amount">Rp 0</h6>
					</div>
				  </div>
				</div>
			  </div>
			</div>
		  </div>
		  <div class="modal-footer">
			<button
			  type="button"
			  class="btn btn-secondary"
			  data-bs-dismiss="modal"
			>
			  Close
			</button>
			<button type="button" class="btn btn-info" id="order">
			  Order Now!
			</button>
		  </div>
		</div>
	  </div>
	</div>
	<!-- End of Cart -->
  
	<div class="container">
	  <div class="row custom-center-element">
		<div class="col-12 text-center">
		  <h2 class="mb-4">Browse Products</h2>
		</div>
	  </div>
	</div>
  
	<!-- Filter select category -->
	<div class="container text-center pb-lg-1">
	  <div class="row p-4 p-lg-0" style="margin-left: 0">
		<div class="col-6 col-md-4">
		  <select
			id="category-select"
			class="form-select"
			aria-label="Select category"
		  >
			<option value="all" selected>Select Category</option>
			{foreach from=$catalogueCategories key=key item=cat}
			<option value="{$cat.cat_id}">{$cat.cat_name}</option>
			{/foreach}
		  </select>
		</div>
		<div class="col-6 col-md-4">
		  <button class="btn btn-primary position-relative" id="show-cart">
			<i class="fa-solid fa-cart-shopping"></i>
			<span
			  class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success"
			  id="count-cart"
			  >0</span
			>
		  </button>
		  <button class="btn position-relative" id="call-a-waiter">
			<!-- <img src="{$BASEURL}resource/assets-frontend/dist/icon/caw.jpeg" />-->
		  </button>
		</div>
		<div class="col-12 col-md-4 mt-2">
		  <h5>Customer: <span id="customer-name"></span></h5>
		</div>
	  </div>
	</div>
	<!-- End of select category -->
  
	<!-- Browse Product -->
	<div class="container-fluid text-center">
	  <div class="row text-center" style="margin-left: 0">
		<div class="col-12 pt-2">
		  <div class="tab-content" id="myTabContent">
			<div
			  class="tab-pane fade show active"
			  id="bakery-tab-pane"
			  role="tabpanel"
			  aria-labelledby="bakery-tab"
			>
			  <div class="container">
				{if !empty($product_mb)}
				<div
				  class="row text-center align-items-end"
				  style="margin-left: 0"
				>
				  {$categoryID = 0} {foreach from=$product_mb key=key item=prod}
				  {if $categoryID != $prod.cat_id} {$categoryID = {$prod.cat_id}}
				  <div
					class="col-12 pt-2 rounded"
					style="background-color: #ff9924"
				  >
					<div class="d-flex justify-content-center">
					  <h2 style="color: #fff">{$prod.cat_name}</h2>
					</div>
				  </div>
				  {/if}
				  <div
					class="col-6 col-sm-4 pt-3 product-image-btn"
					data-product-id="{$prod.product_id}"
				  >
					<div class="d-flex justify-content-center image-catalogue">
					  <img
						src="{$BASEURL}resource/assets-frontend/dist/product/{$prod.product_pict}"
						data-product-id="{$prod.product_id}"
						class="img-fluid custom-block-ek-image e-catalogue-image"
						alt="Image-{strtoupper($prod.product_name)}"
						style="
						  max-height: 100%;
						  filter: drop-shadow(5px 5px 10px #000000);
						"
					  />
					  {if $prod.stock == 0}
					  <img
						src="{$BASEURL}resource/assets-frontend/dist/katalog/soldout.png"
						data-product-id="{$prod.product_id}"
						class="img-fluid custom-block-ek-image"
						alt="Image-{strtoupper($prod.product_name)}"
						style="
						  max-height: 3em;
						  max-width: 4em;
						  filter: drop-shadow(5px 5px 10px #000000);
						  position: absolute;
						"
					  />
					  {/if}
					</div>
					<div
					  class="pt-2 text-center fw-bold custom-catalogue-product-name"
					  style="
						margin-bottom: 0;
						padding-bottom: 0;
						word-wrap: break-word;
					  "
					>
					  {strtoupper($prod.product_name)}
					</div>
					<hr
					  style="
						border: 0.1rem solid #725535;
						opacity: 100;
						margin: 0.25em;
					  "
					/>
					<sup style="padding-top: 100px"
					  ><span class="rounded-circle custom-catalogue-dotrp"
						>Rp</span
					  ></sup
					><span class="custom-catalogue-text">
					  {$prod.price_catalogue} <sup>K</sup></span
					>
				  </div>
				  {/foreach}
				</div>
				{/if}
			  </div>
			</div>
		  </div>
		</div>
	  </div>
	</div>
  
	<!-- Package Modal -->
	<div
	  class="modal fade"
	  id="package-modal"
	  tabindex="-1"
	  aria-labelledby="package-modal-label"
	  aria-hidden="true"
	>
	  <div class="modal-dialog modal-lg modal-dialog-centered">
		<div class="modal-content">
		  <div class="modal-header">
			<h1 class="modal-title fs-5" id="package-modal-label">
			  Package Selection
			</h1>
			<button
			  type="button"
			  class="btn-close"
			  data-bs-dismiss="modal"
			  aria-label="Close"
			></button>
		  </div>
		  <div class="modal-body">
			<div class="container">
			  <!-- Package Details -->
			  <div class="row">
				<div class="col-12">
				  <h5 id="package-name"></h5>
				  <p id="package-description"></p>
				</div>
			  </div>
			  <!-- Package Categories -->
			  <div id="package-categories"></div>
			  <!-- Package Items Selection -->
			  <div class="row mt-3">
				<div class="col-12">
				  <div class="accordion" id="packageItemsAccordion"></div>
				</div>
			  </div>
			  <!-- Selected Items Summary -->
			  <div class="row mt-3">
				<div class="col-12">
				  <div class="card">
					<div class="card-header">Selected Items</div>
					<div class="card-body">
					  <ul
						id="selected-package-items"
						class="list-group list-group-flush"
					  ></ul>
					</div>
				  </div>
				</div>
			  </div>
			</div>
		  </div>
		  <div class="modal-footer">
			<button
			  type="button"
			  class="btn btn-secondary"
			  data-bs-dismiss="modal"
			>
			  Close
			</button>
			<button
			  type="button"
			  class="btn btn-primary"
			  id="add-package-to-cart"
			  disabled
			>
			  Add Package to Cart
			</button>
		  </div>
		</div>
	  </div>
	</div>
  
	<!-- Add Package Selection Button to Product Card -->
	<div id="package-button-template" hidden>
	  <button
		type="button"
		class="btn btn-outline-primary btn-sm mt-2 select-package"
		data-product-id=""
	  >
		Add as Package
	  </button>
	</div>
	<!-- End of Browse Product -->
  </section>
  
  <style>
  	/* Core Variables */
:root {
    --primary: #62411e;
    --primary-light: #8b6337;
    --primary-dark: #442d15;
    --secondary: #ff9924;
    --gray-100: #f8f9fa;
    --gray-200: #e9ecef;
    --gray-300: #dee2e6;
    --gray-400: #ced4da;
    --gray-500: #adb5bd;
    --gray-600: #6c757d;
    --gray-700: #495057;
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
    --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
}

/* Base Layout */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
}

.section-padding {
    padding: 4rem 0;
}

/* Modern Cards */
.modern-card {
    background: #ffffff;
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-md);
    margin-bottom: 1.5rem;
    border: 1px solid var(--gray-200);
    overflow: hidden;
    transition: transform 0.2s, box-shadow 0.2s;
}

.modern-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.card-header {
    padding: 1.25rem;
    background: linear-gradient(45deg, var(--primary) 0%, var(--primary-light) 100%);
    color: white;
}

.card-body {
    padding: 1.5rem;
}

/* Location Alert */
.location-alert {
    background: linear-gradient(to right, var(--gray-100), white);
    border-radius: var(--radius-md);
    padding: 1.25rem;
    margin-bottom: 1.5rem;
    border-left: 4px solid var(--secondary);
    box-shadow: var(--shadow-sm);
}

.location-icon {
    color: var(--secondary);
    font-size: 1.5rem;
    margin-right: 1rem;
}

/* Status Badges */
.status-badge {
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 500;
    background: var(--secondary);
    color: white;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Timer Display */
.timer-display {
    background: linear-gradient(135deg, var(--primary-light), var(--primary));
    padding: 1.5rem;
    text-align: center;
    color: white;
}

#session-timer {
    font-family: 'Monaco', monospace;
    font-size: 2rem;
    font-weight: 500;
}

/* Forms */
.form-control {
    border-radius: var(--radius-sm);
    border: 1px solid var(--gray-300);
    padding: 0.75rem 1rem;
    transition: all 0.2s ease;
}

.form-control:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(98, 65, 30, 0.15);
}

.form-label {
    font-weight: 500;
    color: var(--gray-700);
    margin-bottom: 0.5rem;
}

/* Buttons */
.btn {
    padding: 0.75rem 1.5rem;
    border-radius: var(--radius-sm);
    font-weight: 500;
    transition: all 0.2s ease;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.btn-primary {
    background: var(--primary);
    border: none;
    box-shadow: 0 2px 4px rgba(98, 65, 30, 0.2);
}

.btn-primary:hover {
    background: var(--primary-light);
    transform: translateY(-1px);
    box-shadow: 0 4px 6px rgba(98, 65, 30, 0.3);
}

.btn-info {
    background: var(--secondary);
    border: none;
    color: white;
}

.btn-info:hover {
    background: #e88813;
    color: white;
}

/* Cart Styling */
.cart-summary {
    background: var(--gray-100);
    border-radius: var(--radius-sm);
    padding: 1.5rem;
}

.cart-item, .package-item {
    background: white;
    border-radius: var(--radius-sm);
    padding: 1rem;
    margin-bottom: 1rem;
    border: 1px solid var(--gray-200);
    transition: transform 0.2s;
}

.cart-item:hover, .package-item:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
}

/* Tables */
.table {
    margin-bottom: 0;
}

.table th {
    background: var(--gray-100);
    color: var(--gray-700);
    font-weight: 600;
    padding: 1rem;
    border-bottom: 2px solid var(--gray-300);
}

.table td {
    padding: 1rem;
    vertical-align: middle;
}

/* Product Display */
.product-image-btn {
    transition: transform 0.2s ease;
    cursor: pointer;
}

.product-image-btn:hover {
    transform: translateY(-5px);
}

.custom-catalogue-product-name {
    color: var(--primary);
    font-size: 1.1rem;
    margin: 1rem 0;
}

.custom-catalogue-dotrp {
    background: var(--primary);
    color: white;
    padding: 0.25rem 0.5rem;
    border-radius: 50%;
    font-size: 0.8rem;
}

.custom-catalogue-text {
    color: var(--primary);
    font-size: 1.2rem;
    font-weight: 600;
}

/* Modal Styling */
.modal-content {
    border-radius: var(--radius-md);
    border: none;
    box-shadow: var(--shadow-lg);
}

.modal-header {
    background: linear-gradient(45deg, var(--primary) 0%, var(--primary-light) 100%);
    color: white;
    border-bottom: none;
}

.modal-footer {
    border-top: 1px solid var(--gray-200);
}

/* Alert Styling */
.alert {
    border-radius: var(--radius-sm);
    border: none;
    padding: 1rem 1.25rem;
}

.alert-warning {
    background: rgba(255, 153, 36, 0.1);
    color: #856404;
}

.alert-info {
    background: rgba(98, 65, 30, 0.1);
    color: var(--primary);
}

/* Responsive Design */
@media (max-width: 768px) {
    .section-padding {
        padding: 2rem 0;
    }
    
    .card-body {
        padding: 1rem;
    }
    
    .btn {
        padding: 0.625rem 1.25rem;
    }
    
    #session-timer {
        font-size: 1.5rem;
    }
}

/* Animations */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.fade-in {
    animation: fadeIn 0.3s ease-out;
}

/* Custom Scrollbar */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: var(--gray-100);
}

::-webkit-scrollbar-thumb {
    background: var(--primary);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--primary-light);
}

/* Package Modal Styles */
#package-modal .modal-dialog {
    max-width: 800px;
}

.package-header {
    background: var(--gray-100);
    border-radius: var(--radius-sm);
    padding: 1.25rem;
    margin-bottom: 1rem;
}

.package-items {
    padding-left: 1.5rem;
    border-left: 2px solid var(--gray-300);
}

.package-child-item {
    background: white;
    border-radius: var(--radius-sm);
    padding: 1rem;
    margin-bottom: 0.75rem;
    border: 1px solid var(--gray-200);
}

/* Product Card Styles */
.product-image-btn {
    background: white;
    border-radius: var(--radius-md);
    padding: 1rem;
    margin-bottom: 1.5rem;
    box-shadow: var(--shadow-sm);
    transition: all 0.3s ease;
}

.image-catalogue {
    position: relative;
    padding-top: 100%;
    overflow: hidden;
}

.image-catalogue img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
    transition: transform 0.3s ease;
}

.image-catalogue:hover img {
    transform: scale(1.05);
}

/* Soldout Overlay */
.product-image-btn .soldout-overlay {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0,0,0,0.7);
    color: white;
    padding: 0.5rem 1rem;
    border-radius: var(--radius-sm);
    z-index: 2;
}

/* Category Header */
.category-header {
    background: var(--secondary);
    color: white;
    padding: 1rem;
    border-radius: var(--radius-sm);
    margin: 2rem 0 1rem;
}

.category-header h2 {
    margin: 0;
    font-size: 1.5rem;
    font-weight: 600;
}

/* Filter Section */
.filter-section {
    background: white;
    padding: 1rem;
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-sm);
    margin-bottom: 2rem;
}

#category-select {
    background: white;
    border: 1px solid var(--gray-300);
    border-radius: var(--radius-sm);
    padding: 0.75rem;
    width: 100%;
    font-weight: 500;
    color: var(--gray-700);
    cursor: pointer;
    transition: all 0.2s ease;
}

#category-select:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(98, 65, 30, 0.15);
}

/* Cart Button */
#show-cart {
    position: relative;
    padding: 0.75rem;
    background: var(--primary);
    border-radius: 50%;
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
}

#show-cart i {
    color: white;
    font-size: 1.25rem;
}

#count-cart {
    position: absolute;
    top: -5px;
    right: -5px;
    background: var(--secondary);
    color: white;
    border-radius: 50%;
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
    font-weight: 600;
}

/* Quantity Controls */
.quantity-control {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 0.5rem;
}

.action-number {
    width: 60px !important;
    text-align: center;
    font-weight: 500;
    padding: 0.5rem;
}

.action-minus, .action-plus {
    padding: 0.5rem;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--primary);
    color: white;
    border-radius: var(--radius-sm);
    border: none;
    transition: all 0.2s ease;
}

.action-minus:hover, .action-plus:hover {
    background: var(--primary-light);
    transform: translateY(-1px);
}

/* Notes Textarea */
.notes, .child-notes {
    border: 1px solid var(--gray-300);
    border-radius: var(--radius-sm);
    padding: 0.75rem;
    font-size: 0.875rem;
    resize: none;
    transition: all 0.2s ease;
}

.notes:focus, .child-notes:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(98, 65, 30, 0.15);
}

/* Progress Bar */
#location-progress {
    height: 3px;
    background: var(--gray-200);
    border-radius: 1.5px;
    overflow: hidden;
}

.progress-bar-animated {
    background: linear-gradient(45deg, var(--primary) 25%, var(--primary-light) 50%, var(--primary) 75%);
    background-size: 200% 200%;
    animation: shimmer 1.5s infinite linear;
}

@keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

/* Modal Improvements */
.modal-sm {
    max-width: 400px;
}

.modal-lg {
    max-width: 800px;
}

.modal-dialog-centered {
    display: flex;
    align-items: center;
    min-height: calc(100% - 3.5rem);
}

/* Customer Details */
#customer-name-display {
    font-size: 1.25rem;
    font-weight: 500;
    color: var(--primary);
    margin: 0;
}

/* Operating Hours */
.operating-hours {
    background: linear-gradient(135deg, var(--gray-100), white);
    border-radius: var(--radius-sm);
    padding: 1.25rem;
}

.operating-hours span {
    color: var(--gray-700);
}

.operating-hours .fw-bold {
    color: var(--primary);
}

/* Responsive Improvements */
@media (max-width: 576px) {
    .product-image-btn {
        width: calc(50% - 1rem);
        margin: 0.5rem;
    }
    
    .modal-dialog {
        margin: 0.5rem;
    }
    
    .cart-item .col-3 {
        width: 40%;
    }
    
    .cart-item .col-6 {
        width: 60%;
    }
    
    .package-header .col-3 {
        width: 30%;
    }
    
    .package-header .col-5 {
        width: 40%;
    }
    
    .package-header .col-4 {
        width: 30%;
    }
}

/* Print Styles */
@media print {
    .modern-card {
        box-shadow: none;
        border: 1px solid var(--gray-300);
    }
    
    .btn, 
    .modal-footer,
    #show-cart,
    #category-select {
        display: none !important;
    }
}

/* Additional Animations */
@keyframes pulseWarning {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.alert-warning {
    animation: pulseWarning 2s infinite;
}

/* Accessibility Improvements */
:focus {
    outline: 3px solid var(--primary);
    outline-offset: 2px;
}

.btn:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(98, 65, 30, 0.4);
}

/* Browse Products Section */
.explore-section {
    padding: 2rem 0;
    background: var(--gray-100);
}

.browse-title {
    color: var(--primary);
    font-size: 2rem;
    font-weight: 600;
    text-align: center;
    margin-bottom: 2rem;
}

/* Value Meals Section */
.value-meals {
    background: var(--secondary);
    color: white;
    padding: 1rem;
    border-radius: var(--radius-sm);
    text-align: center;
    font-size: 1.5rem;
    font-weight: 600;
    margin: 2rem 0;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* Product Grid */
.product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1.5rem;
    padding: 1rem;
}

/* Price Display */
.price-display {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    margin-top: 1rem;
}

.price-currency {
    background: var(--primary);
    color: white;
    padding: 0.25rem 0.5rem;
    border-radius: 50%;
    font-size: 0.75rem;
    font-weight: 600;
}

.price-amount {
    color: var(--primary);
    font-size: 1.25rem;
    font-weight: 600;
}

/* Detail Product Modal */
#detail-product .modal-body img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-sm);
    margin-bottom: 1rem;
    box-shadow: var(--shadow-sm);
}

#detail-product-description {
    color: var(--gray-700);
    line-height: 1.6;
    margin-top: 1rem;
}

/* Package Modal */
#packageItemsAccordion .accordion-item {
    border: 1px solid var(--gray-300);
    border-radius: var(--radius-sm);
    margin-bottom: 0.5rem;
}

#packageItemsAccordion .accordion-button {
    background: var(--gray-100);
    color: var(--primary);
    font-weight: 500;
    padding: 1rem;
}

#packageItemsAccordion .accordion-button:not(.collapsed) {
    background: var(--primary);
    color: white;
}

/* Selected Items List */
#selected-package-items {
    list-style: none;
    padding: 0;
}

#selected-package-items li {
    padding: 0.75rem;
    border-bottom: 1px solid var(--gray-200);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* Call Waiter Button */
#call-a-waiter {
    background: var(--primary);
    color: white;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-left: 0.5rem;
    transition: all 0.2s ease;
}

#call-a-waiter:hover {
    background: var(--primary-light);
    transform: scale(1.1);
}

/* Navigation Links */
.nav-link {
    color: var(--primary);
    font-weight: 500;
    padding: 0.5rem 1rem;
    transition: all 0.2s ease;
}

.nav-link:hover {
    color: var(--primary-light);
}

.nav-link.active {
    background: var(--primary);
    color: white;
    border-radius: var(--radius-sm);
}

/* Header Section */
.header-section {
    background: white;
    padding: 1rem 0;
    border-bottom: 1px solid var(--gray-200);
    position: sticky;
    top: 0;
    z-index: 1000;
}

/* Loader Animation */
@keyframes loading {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.loading-spinner {
    width: 40px;
    height: 40px;
    border: 4px solid var(--gray-200);
    border-top-color: var(--primary);
    border-radius: 50%;
    animation: loading 1s infinite linear;
}

/* Additional Responsive Styles */
@media (max-width: 992px) {
    .product-grid {
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    }
}

@media (max-width: 768px) {
    .browse-title {
        font-size: 1.5rem;
    }
    
    .value-meals {
        font-size: 1.25rem;
        padding: 0.75rem;
    }
}

@media (max-width: 576px) {
    .product-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
    }
    
    .price-display {
        flex-direction: column;
        gap: 0.25rem;
    }
}

/* High Contrast Mode */
@media (prefers-contrast: high) {
    :root {
        --primary: #000000;
        --secondary: #ffffff;
    }
    
    .btn, .status-badge, .card-header {
        border: 2px solid black;
    }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
    * {
        animation: none !important;
        transition: none !important;
    }
}
</style>
  
  <!-- Bootstrap JS and dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  
  <!-- Page Script -->
  <script src="{$BASEURL}resource/assets-frontend/js/order.js"></script>
  <script src="{$BASEURL}resource/assets-frontend/js/package.js"></script>
  <script src="{$BASEURL}resource/assets-frontend/js/session-management.js"></script>
  